<!doctype HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>code.pyret.org/grade</title>
  <link rel="stylesheet" href="/css/pure-min.css">
  <link rel="stylesheet" href="/css/grade.css">
</head>
<body>
  <div class="pure-g">
    <div id="cfg-container">
      <div class="pure-u-1-2">
        <form id="cfg" class="pure-form pure-form-stacked" method="POST">
          <fieldset>
            <legend>CPO/grade Configuration</legend>
            <button id="openFile" class="blueButton loginOnly">Open</button>

            <label for="id">What's the gDrive folder ID of the student submissions?</label>
            <input name="id" id="id" class="pure-input-1"></input>

            <label for="submission-name">Submission name? (E.g. "tests" or "final-submission")</label>
            <input name="submission-name" id="submission-name" class="pure-input-1"></input>

            <label for="implementation">What's the name of a implementation file? (E.g. "list-drill-code.arr")</label>
            <input name="implementation" id="implementation" class="pure-input-1"></input>

            <label for="test">What's the name of a test file? (E.g. "list-drill-tests.arr")</label>
            <input name="test" id="test" class="pure-input-1"></input>

            <label for="suite">What's the gDrive file ID of your test suite?</label>
            <input name="suite" id="suite" class="pure-input-1"></input>

            <label for="gold">What's the gDrive file ID of your gold?</label>
            <input name="gold" id="gold" class="pure-input-1"></input>

            <label for="coals">What's the gDrive folder ID of your coals?</label>
            <input name="coals" id="coals" class="pure-input-1"></input>

            <label for="timeout">Timeout, in seconds, for each individual run? (Default is 120 seconds, i.e. 2 minutes.)</label>
            <input name="timeout" id="timeout" class="pure-input-1"></input>

            <button id="load" class="pure-button pure-button-primary" disabled="disabled">Load Submissions</button>

          </fieldset>
        </form>
      </div>
      <div class="pure-u-1-2">
        <form id="prf" class="pure-form pure-form-stacked" method="POST">
          <fieldset>
            <legend>Previous Runs</legend>

            <label for="pr">What's the time of the run you would like to restore?</label>
            <select name="pr" id="pr" class="pure-input-1"></select>

            <button type="submit" class="pure-button pure-button-primary">Restore</button>
            <button id="reset" type="reset" class="pure-button pure-button-primary">Reset</button>
          </fieldset>
        </form>
      </div>
    </div>
    <h2 id="loading-message" style="display:none">Loading resources from Google Drive...</h2>
    <div class="pure-u-1">
      <table id="tbl" class="pure-table pure-table-bordered">
      </table>
    </div>
    <div class="pure-u-1">
      <form id="frm" class="pure-form">
        <fieldset>
          <button id="gen" type="submit" class="pure-button pure-button-primary">Run selected</button>
        </fieldset>
        <textarea id="out" class="pure-input-1" placeholder="Click 'Run selected' after selecting targets"></textarea>
        <fieldset>
          <button id="download" disabled="disabled" class="pure-button pure-button-primary">Download JSON</button>
        </fieldset>
      </form>
      <a id="downloadAnchorElem" style="display:none"></a>
    </div>
  </div>

  <script src="/js/es6-shim.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
  <script src="/js/loader.js"></script>
  <script src="/js/colorspaces.js"></script>
  <script src="/js/q.js"></script>
  <script src="/js/codemirror.js"></script>
  <script src="/js/foldcode.js"></script>
  <script src="/js/foldgutter.js"></script>
  <script src="/js/mark-selection.js"></script>
  <script src="/js/runmode.js"></script>
  <script src="/js/pyret-mode.js"></script>
  <script src="/js/pyret-fold.js"></script>
  <script src="/js/matchkw.js"></script>
  <script src="/js/draw.js"></script>
  <script src="/js/mustache.js"></script>
  <script src="/js/jszip.js"></script>
  <script src="/js/FileSaver.js"></script>
  <script src="/js/require.js"></script>
  <script>
    window.module = {};
  </script>
  <script src="/js/s-expression-lib.js"></script>
  <script>
  var sexp_exports = window.module.exports;
  define("s-expression", [], function() {
    return sexp_exports;
  });
  </script>
  <script src="/js/seedrandom.js"></script>
  <script>
  var seed_exports = window.module.exports;
  define("seedrandom", [], function() {
    return seed_exports;
  });
  </script>
  <script>delete window.module;</script>
  <script src="/js/share.js"></script>
  <script src="/js/google-apis/api-wrapper.js"></script>
  <script src="/js/google-apis/drive.js"></script>
  <script src="/js/google-apis/picker.js"></script>
  <script src="/js/google-apis/sheets.js"></script>
  <script src="/js/authenticate-storage.js"></script>
  <script>
  var clientId = "";
  var apiKey = "{{ GOOGLE_API_KEY }}";
  function handleGoogLoad() {
    handleClientLoad(clientId, apiKey);
  }
  </script>
  <!-- Google API Loader (For picker) -->
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <!-- GAPI Client -->
  <script type="text/javascript" src="https://apis.google.com/js/client.js?onload=handleGoogLoad"></script>
  <script>console.log(window.performance.now())</script>
  <!-- <script src="js/beforePyret.js"></script> -->
  <script>
    var APP_BASE_URL = "{{{ BASE_URL }}}";
    storageAPI = storageAPI.then(function(api) { return api.api; });
  </script>

  <!-- <script type="text/javascript"
          src="https://caja.appspot.com/caja.js"></script> -->
  <script type="text/javascript" src="/js/grade.js"></script>
</body>
</html>
